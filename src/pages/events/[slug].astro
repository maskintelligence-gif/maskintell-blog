---
import BaseLayout from "../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
  const files = await Astro.glob("../../content/events/*.md");
  return files.map(f => ({
    params: { slug: f.frontmatter.slug },
    props: { event: f }
  }));
}

const { event } = Astro.props;
const e = event.frontmatter;
---

<BaseLayout title={e.title} description={e.description}>
  <article class="container" itemscope itemtype="https://schema.org/Event">
    <h1 itemprop="name">{e.title}</h1>
    <img src={e.image} alt={e.title} />

    <p itemprop="description">{e.description}</p>

    <p>
      <time itemprop="startDate">{e.start_date}</time> â€“
      <time itemprop="endDate">{e.end_date}</time>
    </p>

    {e.location && <p itemprop="location">{e.location}</p>}
    {e.online_url && <a href={e.online_url}>Join Online</a>}
  </article>
</BaseLayout>
